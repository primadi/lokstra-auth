### Credential Config Service API Tests
@baseUrl = http://localhost:8080
@contentType = application/json
@tenantId = acme-corp
@appId = main-app
@branchId = hq-jakarta
@configId = basic-auth-config

### 1. Create Basic Auth Config
POST {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs
Content-Type: {{contentType}}

{
  "credential_type": "basic",
  "config": {
    "hash_algorithm": "bcrypt",
    "bcrypt_cost": 12,
    "allow_username_login": true,
    "allow_email_login": true,
    "require_email_verification": false
  },
  "enabled": true
}

### 2. Create OAuth2 Config
POST {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs
Content-Type: {{contentType}}

{
  "credential_type": "oauth2",
  "config": {
    "provider": "google",
    "client_id": "your-google-client-id",
    "client_secret": "your-google-client-secret",
    "redirect_uri": "http://localhost:8080/auth/callback",
    "scopes": ["openid", "email", "profile"]
  },
  "enabled": true
}

### 3. Create API Key Config
POST {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs
Content-Type: {{contentType}}

{
  "credential_type": "apikey",
  "config": {
    "header_name": "X-API-Key",
    "prefix": "ak_",
    "key_length": 32,
    "allow_query_param": false
  },
  "enabled": true
}

### 4. Create Passkey Config
POST {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs
Content-Type: {{contentType}}

{
  "credential_type": "passkey",
  "config": {
    "rp_name": "Acme Corporation",
    "rp_id": "localhost",
    "origin": "http://localhost:8080",
    "timeout": 60000,
    "user_verification": "preferred"
  },
  "enabled": true
}

### 5. Create Passwordless Config
POST {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs
Content-Type: {{contentType}}

{
  "credential_type": "passwordless",
  "config": {
    "code_length": 6,
    "code_expiry_seconds": 300,
    "delivery_method": "email",
    "max_attempts": 3
  },
  "enabled": true
}

### 6. Get Credential Config by ID
GET {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs/{{configId}}

### 7. Get Credential Config by Type
GET {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs/type/basic

### 8. List All Credential Configs for Branch
GET {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs

### 9. Update Credential Config
PUT {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs/{{configId}}
Content-Type: {{contentType}}

{
  "config": {
    "hash_algorithm": "bcrypt",
    "bcrypt_cost": 14,
    "allow_username_login": true,
    "allow_email_login": true,
    "require_email_verification": true
  },
  "enabled": true
}

### 10. Enable Credential Config
POST {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs/{{configId}}/enable

### 11. Disable Credential Config
POST {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs/{{configId}}/disable

### 12. Delete Credential Config
DELETE {{baseUrl}}/api/v1/tenants/{{tenantId}}/apps/{{appId}}/branches/{{branchId}}/credential-configs/{{configId}}
